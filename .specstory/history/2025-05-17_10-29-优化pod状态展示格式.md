<!-- Generated by SpecStory -->

# ä¼˜åŒ–PodçŠ¶æ€å±•ç¤ºæ ¼å¼ (2025-05-17 18:29:16)

_**User**_

å¾ˆå¥½äº†ç°åœ¨çš„æ•ˆæœï¼Œä½†æ˜¯æˆ‘æœ‰ä¸ªå¥½æƒ³æ³•ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å°†ä¸‹é¢è¯¦æƒ…è¡¨æ ¼å±•ç¤ºä¹Ÿå¤ç”¨æˆæ ¼å­å½¢å¼å±•ç¤ºï¼Œå°±åƒèµ„æºä½¿ç”¨æ¦‚è§ˆä¸€æ ·ã€‚ä½ ç°åœ¨å…ˆè¦åšçš„æ˜¯ï¼Œå°†å‰é¢æ ¼å­ä¸­æ˜¾ç¤ºè¿‡çš„cpu å†…å­˜  ç£ç›˜ ï¼Œåœ¨ä¸‹é¢è¯¦æƒ…ä¸­å…ˆåˆ é™¤ï¼›ç„¶åæˆ‘ä»¬å…ˆä»podè¿è¡ŒçŠ¶æ€å¼€å§‹å®éªŒï¼Œé¦–å…ˆpodè¿è¡ŒçŠ¶æ€ï¼Œç„¶åå¢åŠ ä¼˜é›…ç¾è§‚çš„å°æ ‡é¢˜(å–namespace)ï¼Œç´§æ¥ç€ä¸‹é¢å¤ç”¨æ ¼å­å±•ç¤ºï¼Œæ ¼å­å†…å®¹å±•ç¤ºpodè¿è¡ŒçŠ¶æ€ï¼ˆé¢œè‰²æ–¹é¢ï¼Œphaseå¦‚æœä¸ºRunningå’ŒSucceededåˆ™ä¸ºç»¿è‰²ï¼ŒPendingåˆ™ä¸ºé»„è‰²ï¼ŒFailedä¸ºçº¢è‰²ï¼ŒUnknownä¸ºç°è‰²ï¼‰ï¼Œç„¶åé¼ æ ‡æ‚¬åœæ—¶ï¼Œä»¿ç…§ä¹‹å‰çš„èµ„æºä½¿ç”¨æ¦‚è§ˆæ ¼å­çš„æ•ˆæœå’Œæ ¼å¼å±•ç¤ºpodåç§°å’Œè¿è¡ŒçŠ¶æ€

---

_**Assistant**_



---

æˆ‘éœ€è¦å…ˆäº†è§£é¡¹ç›®ç»“æ„å’Œç›¸å…³ä»£ç ï¼Œè¿™æ ·æ‰èƒ½å¸®æ‚¨å®ç°è¿™ä¸ªæ•ˆæœã€‚

---

<details>
            <summary>Listed current directory â€¢ **21** results</summary>
        
| Name |
|-------|
| ğŸ“ `reports` |
| ğŸ“„ `stellar-autops` |
| ğŸ“„ `main.go` |
| ğŸ“ `.specstory` |
| ğŸ“ `.git` |
| ğŸ“ `pkg` |
| ğŸ“„ `.goreleaser.yaml` |
| ğŸ“„ `Dockerfile` |
| ğŸ“„ `go.mod` |
| ğŸ“ `tmp` |
| ğŸ“„ `.gitignore` |
| ğŸ“„ `README.md` |
| ğŸ“ `config` |
| ğŸ“ `templates` |
| ğŸ“ `outputs` |
| ğŸ“ `images` |
| ğŸ“ `deploy` |
| ğŸ“„ `go.sum` |
| ğŸ“„ `.DS_Store` |
| ğŸ“ `.github` |
| ğŸ“ `.idea` |

</details>

---

è®©æˆ‘çœ‹çœ‹æ¨¡æ¿ç›®å½•ä¸­çš„ä»£ç ï¼Œè¿™é‡Œå¯èƒ½åŒ…å«å‰ç«¯å±•ç¤ºç›¸å…³çš„æ–‡ä»¶ï¼š

---

<details>
            <summary>Listed directory templates â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `report.html` |
| ğŸ“„ `status.html` |

</details>

---

æˆ‘ä»¬éœ€è¦å…ˆæŸ¥çœ‹status.htmlæ–‡ä»¶ï¼Œçœ‹çœ‹å½“å‰çš„Podè¿è¡ŒçŠ¶æ€æ˜¯å¦‚ä½•å±•ç¤ºçš„ï¼š

---

Read file: templates/status.html

---

è®©æˆ‘ç»§ç»­æŸ¥çœ‹è¯¥æ–‡ä»¶çš„åç»­å†…å®¹:

---

Read file: templates/status.html

---

ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹report.htmlæ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯èµ„æºä½¿ç”¨æ¦‚è§ˆçš„æ ¼å­å½¢å¼å±•ç¤ºéƒ¨åˆ†ï¼š

---

Read file: templates/report.html

---

è®©æˆ‘ç»§ç»­æŸ¥çœ‹report.htmlæ–‡ä»¶çš„ååŠéƒ¨åˆ†ï¼Œç‰¹åˆ«æ˜¯èµ„æºä½¿ç”¨æ¦‚è§ˆçš„æ ¼å­å½¢å¼å®ç°ï¼š

---

Read file: templates/report.html

---

è®©æˆ‘ç»§ç»­æŸ¥çœ‹report.htmlä¸­å‰©ä½™çš„éƒ¨åˆ†ï¼š

---

Read file: templates/report.html

---

ç°åœ¨ï¼Œæˆ‘å·²ç»äº†è§£äº†ç°æœ‰ä»£ç çš„ç»“æ„å’Œå®ç°æ–¹å¼ã€‚æˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªç±»ä¼¼èµ„æºä½¿ç”¨æ¦‚è§ˆçš„æ ¼å­å±•ç¤ºæ–¹å¼ï¼Œä½†ç”¨äºPodè¿è¡ŒçŠ¶æ€ã€‚ä¸‹é¢æˆ‘å°†ä¿®æ”¹report.htmlæ–‡ä»¶ï¼š

---

```diff
              }
          }
+ 
+         /* PodçŠ¶æ€æ ¼å­æ ·å¼ */
+         .pod-status-section {
+             margin-bottom: 30px;
+         }
+ 
+         .namespace-section {
+             margin-bottom: 20px;
+         }
+ 
+         .namespace-title {
+             font-size: 16px;
+             margin-bottom: 10px;
+             color: #333;
+             padding-left: 5px;
+             border-left: 4px solid #4CAF50;
+         }
+ 
+         .pod-grid {
+             display: flex;
+             flex-wrap: wrap;
+             gap: 4px;
+             margin-bottom: 15px;
+             align-items: center;
+         }
+ 
+         .pod-cell {
+             width: 30px;
+             height: 30px;
+             border-radius: 3px;
+             cursor: pointer;
+             position: relative;
+             display: flex;
+             align-items: center;
+             justify-content: center;
+             font-size: 10px;
+             color: white;
+             font-weight: bold;
+         }
+ 
+         .pod-cell.running {
+             background-color: #4CAF50; /* ç»¿è‰²è¡¨ç¤ºRunning */
+         }
+ 
+         .pod-cell.succeeded {
+             background-color: #4CAF50; /* ç»¿è‰²è¡¨ç¤ºSucceeded */
+         }
+ 
+         .pod-cell.pending {
+             background-color: #ffc107; /* é»„è‰²è¡¨ç¤ºPending */
+             color: #333;
+         }
+ 
+         .pod-cell.failed {
+             background-color: #dc3545; /* çº¢è‰²è¡¨ç¤ºFailed */
+         }
+ 
+         .pod-cell.unknown {
+             background-color: #6c757d; /* ç°è‰²è¡¨ç¤ºUnknown */
+         }
+ 
+         .pod-count {
+             margin-left: 20px;
+             font-weight: bold;
+             font-size: 14px;
+         }
+ 
+         .pod-status-legend {
+             display: flex;
+             margin: 10px 0 20px 0;
+             font-size: 12px;
+             flex-wrap: wrap;
+         }
+ 
+         .pod-status-legend .legend-color {
+             width: 16px;
+             height: 16px;
+             border-radius: 3px;
+             margin-right: 5px;
+         }
+ 
+         .pod-status-legend .legend-color.running,
+         .pod-status-legend .legend-color.succeeded {
+             background-color: #4CAF50;
+         }
+ 
+         .pod-status-legend .legend-color.pending {
+             background-color: #ffc107;
+         }
+ 
+         .pod-status-legend .legend-color.failed {
+             background-color: #dc3545;
+         }
+ 
+         .pod-status-legend .legend-color.unknown {
+             background-color: #6c757d;
+         }
+ 
+         .pod-cell:hover .tooltip {
+             visibility: visible;
+             opacity: 1;
+         }
      </style>
  </head>
```

```diff
              <h2>{{$type}} ç›‘æ§æŒ‡æ ‡</h2>
              {{range $metricName, $metrics := $group.MetricsByName}}
-                 {{if ne $metricName "ç³»ç»Ÿè¿è¡Œæ—¶é—´"}}
+                 {{if ne $metricName "ç³»ç»Ÿè¿è¡Œæ—¶é—´" }}
+                 {{if ne $metricName "CPUä½¿ç”¨ç‡" }}
+                 {{if ne $metricName "å†…å­˜ä½¿ç”¨ç‡" }}
+                 {{if ne $metricName "ç£ç›˜ä½¿ç”¨ç‡" }}
+                 {{if ne $metricName "æ ¹åˆ†åŒºç£ç›˜ä½¿ç”¨ç‡" }}
                  <h3><li>{{$metricName}}</li></h3>
                  {{if eq (len $metrics) 0 }}
                      <p>æœªæŸ¥è¯¢åˆ°æ•°æ®</p>
                  {{else}}
+                     <!-- Podè¿è¡ŒçŠ¶æ€æ£€æŸ¥ -->
+                     {{if eq $metricName "Podè¿è¡ŒçŠ¶æ€"}}
+                     <div class="pod-status-section">
+                         <!-- Podè¿è¡ŒçŠ¶æ€æ ¼å­å›¾æŒ‰å‘½åç©ºé—´åˆ†ç»„ -->
+                         {{$namespaceGroups := (groupPodsByNamespace $metrics)}}
+                         {{range $namespace, $podMetrics := $namespaceGroups}}
+                         <div class="namespace-section">
+                             <h4 class="namespace-title">å‘½åç©ºé—´: {{$namespace}}</h4>
+                             <div class="pod-grid">
+                                 {{range $podMetric := $podMetrics}}
+                                     <div class="pod-cell {{getPodStatusClass $podMetric.Status}}">
+                                         <div class="tooltip">
+                                             <div class="tooltip-row">
+                                                 <span class="tooltip-label">Podåç§°:</span>
+                                                 <span class="tooltip-value">{{getPodName $podMetric.Labels}}</span>
+                                             </div>
+                                             <div class="tooltip-row">
+                                                 <span class="tooltip-label">çŠ¶æ€:</span>
+                                                 <span class="tooltip-value">{{$podMetric.Status}}</span>
+                                             </div>
+                                             <div class="tooltip-row">
+                                                 <span class="tooltip-label">æ£€æµ‹æ—¶é—´:</span>
+                                                 <span class="tooltip-value">{{$podMetric.Timestamp.Format "2006-01-02 15:04:05"}}</span>
+                                             </div>
+                                         </div>
+                                     </div>
+                                 {{end}}
+                                 <div class="pod-count">æ€»è®¡: {{len $podMetrics}}ä¸ªPod</div>
+                             </div>
+                         </div>
+                         {{end}}
+                         
+                         <!-- PodçŠ¶æ€å›¾ä¾‹ -->
+                         <div class="pod-status-legend">
+                             <div class="legend-item">
+                                 <div class="legend-color running"></div>
+                                 <div>Running</div>
+                             </div>
+                             <div class="legend-item">
+                                 <div class="legend-color succeeded"></div>
+                                 <div>Succeeded</div>
+                             </div>
+                             <div class="legend-item">
+                                 <div class="legend-color pending"></div>
+                                 <div>Pending</div>
+                             </div>
+                             <div class="legend-item">
+                                 <div class="legend-color failed"></div>
+                                 <div>Failed</div>
+                             </div>
+                             <div class="legend-item">
+                                 <div class="legend-color unknown"></div>
+                                 <div>Unknown</div>
+                             </div>
+                         </div>
+                     </div>
+                     {{else}}
+                     <!-- å…¶ä»–æŒ‡æ ‡ç»§ç»­ä½¿ç”¨è¡¨æ ¼å±•ç¤º -->
                      <table>
                          <tr>
```

```diff
                          {{end}}
                      </table>
+                     {{end}}
+                 {{end}}
+                 {{end}}
+                 {{end}}
+                 {{end}}
                  {{end}}
                  {{end}}
```

```diff
      });
  </script>
+ 
+ <script>
+     // Podç›¸å…³çš„è¾…åŠ©å‡½æ•°
+     function groupPodsByNamespace(podMetrics) {
+         const namespaceGroups = {};
+         
+         for (const metric of podMetrics) {
+             // æŸ¥æ‰¾namespaceæ ‡ç­¾
+             const namespaceLabel = metric.Labels.find(label => label.Name === "namespace");
+             const namespace = namespaceLabel ? namespaceLabel.Value : "default";
+             
+             if (!namespaceGroups[namespace]) {
+                 namespaceGroups[namespace] = [];
+             }
+             
+             namespaceGroups[namespace].push(metric);
+         }
+         
+         return namespaceGroups;
+     }
+     
+     function getPodName(labels) {
+         const podLabel = labels.find(label => label.Name === "pod");
+         return podLabel ? podLabel.Value : "æœªçŸ¥";
+     }
+     
+     function getPodStatusClass(status) {
+         if (status === "Running" || status === "running") return "running";
+         if (status === "Succeeded" || status === "succeeded") return "succeeded";
+         if (status === "Pending" || status === "pending") return "pending";
+         if (status === "Failed" || status === "failed") return "failed";
+         return "unknown";
+     }
+ </script>
  </body>
  </html>
```

---

ç°åœ¨æˆ‘ä»¬éœ€è¦å®Œå–„ä»£ç ï¼Œç¡®ä¿Goè¯­è¨€çš„æ¨¡æ¿å‡½æ•°èƒ½å¤Ÿæ­£ç¡®è¿è¡Œã€‚ç”±äºæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨äº†`groupPodsByNamespace`ã€`getPodName`å’Œ`getPodStatusClass`è¿™äº›å‡½æ•°ï¼Œéœ€è¦åœ¨Goä»£ç ä¸­å®ç°è¿™äº›å‡½æ•°ã€‚

è®©æˆ‘ä»¬å…ˆæŸ¥æ‰¾ç›¸å…³çš„Goæ–‡ä»¶ï¼š

---

<details>
            <summary>Listed directory pkg â€¢ **8** results</summary>
        
| Name |
|-------|
| ğŸ“ `stellar` |
| ğŸ“ `config` |
| ğŸ“ `metrics` |
| ğŸ“ `notify` |
| ğŸ“ `prometheus` |
| ğŸ“ `report` |
| ğŸ“ `status` |
| ğŸ“ `utils` |

</details>

---

æˆ‘ä»¬éœ€è¦æŸ¥çœ‹ä¸reportæœ‰å…³çš„Goæ–‡ä»¶ï¼Œä»¥ä¾¿æ·»åŠ æˆ‘ä»¬éœ€è¦çš„æ¨¡æ¿å‡½æ•°ï¼š

---

<details>
            <summary>Listed directory pkg/report â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `cleanup.go` |
| ğŸ“„ `generator.go` |

</details>

---

è®©æˆ‘ä»¬æŸ¥çœ‹generator.goæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åº”è¯¥åŒ…å«äº†HTMLæŠ¥å‘Šç”Ÿæˆçš„ç›¸å…³ä»£ç ï¼š

---

Read file: pkg/report/generator.go

---

ç°åœ¨ï¼Œæˆ‘éœ€è¦ä¿®æ”¹generator.goæ–‡ä»¶ï¼Œæ·»åŠ æˆ‘ä»¬éœ€è¦çš„å‡½æ•°ï¼š

---

```diff
  	"os"
  	"sort"
+ 	"strings"
  	"time"
  )
```

```diff
  
  	// ç”ŸæˆæŠ¥å‘Š
- 	tmpl, err := template.ParseFiles("templates/report.html")
+ 	// åˆ›å»ºæ¨¡æ¿å‡½æ•°æ˜ å°„
+ 	funcMap := template.FuncMap{
+ 		"now": time.Now,
+ 		"groupPodsByNamespace": func(metrics []MetricData) map[string][]MetricData {
+ 			return groupPodsByNamespace(metrics)
+ 		},
+ 		"getPodName": func(labels []LabelData) string {
+ 			return getPodName(labels)
+ 		},
+ 		"getPodStatusClass": func(status string) string {
+ 			return getPodStatusClass(status)
+ 		},
+ 	}
+ 
+ 	// ä½¿ç”¨å¸¦å‡½æ•°æ˜ å°„çš„æ¨¡æ¿
+ 	tmpl, err := template.New("report.html").Funcs(funcMap).ParseFiles("templates/report.html")
  	if err != nil {
  		return "", fmt.Errorf("parsing template: %w", err)
```

```diff
  	return filename, nil // æ·»åŠ è¿”å›è¯­å¥
  }
+ 
+ // æŒ‰å‘½åç©ºé—´åˆ†ç»„PodæŒ‡æ ‡
+ func groupPodsByNamespace(metrics []MetricData) map[string][]MetricData {
+ 	namespaceGroups := make(map[string][]MetricData)
+ 	
+ 	for _, metric := range metrics {
+ 		namespace := "default"
+ 		
+ 		// æŸ¥æ‰¾namespaceæ ‡ç­¾
+ 		for _, label := range metric.Labels {
+ 			if label.Name == "namespace" {
+ 				namespace = label.Value
+ 				break
+ 			}
+ 		}
+ 		
+ 		if _, exists := namespaceGroups[namespace]; !exists {
+ 			namespaceGroups[namespace] = []MetricData{}
+ 		}
+ 		
+ 		namespaceGroups[namespace] = append(namespaceGroups[namespace], metric)
+ 	}
+ 	
+ 	return namespaceGroups
+ }
+ 
+ // ä»æ ‡ç­¾ä¸­è·å–Podåç§°
+ func getPodName(labels []LabelData) string {
+ 	for _, label := range labels {
+ 		if label.Name == "pod" {
+ 			return label.Value
+ 		}
+ 	}
+ 	return "æœªçŸ¥"
+ }
+ 
+ // æ ¹æ®PodçŠ¶æ€è·å–CSSç±»å
+ func getPodStatusClass(status string) string {
+ 	status = strings.ToLower(status)
+ 	switch status {
+ 	case "running":
+ 		return "running"
+ 	case "succeeded":
+ 		return "succeeded"
+ 	case "pending":
+ 		return "pending"
+ 	case "failed":
+ 		return "failed"
+ 	default:
+ 		return "unknown"
+ 	}
+ }
  
```

---

è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬æ˜¯å¦è¿˜éœ€è¦ä¿®æ”¹å…¶ä»–æ–‡ä»¶ã€‚ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹æŠ¥å‘Šä¸­Podè¿è¡ŒçŠ¶æ€çš„æ•°æ®æ˜¯å¦‚ä½•ç”Ÿæˆçš„ã€‚è®©æˆ‘ä»¬æŸ¥çœ‹main.goæ–‡ä»¶ï¼š

---

Read file: main.go

---

ç°åœ¨è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹metricsæ”¶é›†å™¨ï¼Œç‰¹åˆ«æ˜¯ä¸PodçŠ¶æ€ç›¸å…³çš„ä»£ç ï¼š

---

<details>
            <summary>Listed directory pkg/metrics â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `collector.go` |

</details>

---

Read file: pkg/metrics/collector.go

---

æˆ‘ä»¬ç°åœ¨éœ€è¦æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œäº†è§£PodçŠ¶æ€æŒ‡æ ‡æ˜¯å¦‚ä½•é…ç½®çš„ï¼š

---

<details>
            <summary>Listed directory config â€¢ **3** results</summary>
        
| Name |
|-------|
| ğŸ“„ `config.yaml` |
| ğŸ“„ `nginx.conf` |
| ğŸ“„ `config.yaml.bak` |

</details>

---

Read file: config/config.yaml

---

ç°åœ¨æˆ‘ä»¬äº†è§£äº†ä»£ç çš„ç»“æ„å’ŒPodçŠ¶æ€æŒ‡æ ‡çš„é…ç½®æ–¹å¼ã€‚ç„¶è€Œï¼Œæˆ‘æ³¨æ„åˆ°é›†ç¾¤Podè¿è¡ŒçŠ¶æ€ç»Ÿè®¡çš„æŸ¥è¯¢åªåŒ…å«äº†RunningçŠ¶æ€çš„Podã€‚æˆ‘ä»¬åº”è¯¥ä¿®æ”¹æŸ¥è¯¢ï¼Œä»¥è·å–ä¸åŒçŠ¶æ€çš„Podä¿¡æ¯ï¼Œè¿™æ ·æ‰èƒ½åœ¨UIä¸­æ ¹æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒé¢œè‰²ã€‚

è®©æˆ‘ä»¬ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š

---

```diff
        - name: "Podè¿è¡ŒçŠ¶æ€"
          description: "é›†ç¾¤Podè¿è¡ŒçŠ¶æ€ç»Ÿè®¡"
-         query: "sum by (namespace, pod) (kube_pod_status_phase{phase='Running'})"
+         query: "sum by (namespace, pod, phase) (kube_pod_status_phase)"
          #prometheus_url: "http://prometheus-k8s.kubesphere-monitoring-system:9090"
          prometheus_url: "http://172.31.101.239:13324/"
```

```diff
            namespace: "å‘½åç©ºé—´"
            pod: "Podåç§°"
+           phase: "è¿è¡ŒçŠ¶æ€"
  
        - name: "èŠ‚ç‚¹å°±ç»ªçŠ¶æ€"
```

---

ç°åœ¨æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹Podè¿è¡ŒçŠ¶æ€çš„å¤„ç†æ–¹å¼ï¼Œä½¿å…¶èƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºçŠ¶æ€ã€‚è®©æˆ‘ä»¬ä¿®æ”¹report.htmlä¸­çš„PodçŠ¶æ€å±•ç¤ºä»£ç ï¼š

---

```diff
                              <div class="pod-grid">
                                  {{range $podMetric := $podMetrics}}
-                                     <div class="pod-cell {{getPodStatusClass $podMetric.Status}}">
+                                     <div class="pod-cell {{getPodStatusClass (getPodPhase $podMetric.Labels)}}">
                                          <div class="tooltip">
                                              <div class="tooltip-row">
                                                  <span class="tooltip-label">Podåç§°:</span>
                                                  <span class="tooltip-value">{{getPodName $podMetric.Labels}}</span>
                                              </div>
+                                             <div class="tooltip-row">
+                                                 <span class="tooltip-label">å‘½åç©ºé—´:</span>
+                                                 <span class="tooltip-value">{{getNamespace $podMetric.Labels}}</span>
+                                             </div>
                                              <div class="tooltip-row">
                                                  <span class="tooltip-label">çŠ¶æ€:</span>
-                                                 <span class="tooltip-value">{{$podMetric.Status}}</span>
+                                                 <span class="tooltip-value">{{getPodPhase $podMetric.Labels}}</span>
                                              </div>
                                              <div class="tooltip-row">
```

---

ç°åœ¨æˆ‘ä»¬éœ€è¦æ·»åŠ æ–°çš„å‡½æ•°åˆ°generator.goæ–‡ä»¶ä¸­ï¼š

---

```diff
  			return getPodName(labels)
  		},
+ 		"getNamespace": func(labels []LabelData) string {
+ 			return getNamespace(labels)
+ 		},
  		"getPodStatusClass": func(status string) string {
  			return getPodStatusClass(status)
  		},
+ 		"getPodPhase": func(labels []LabelData) string {
+ 			return getPodPhase(labels)
+ 		},
  	}
  
```

```diff
  	}
  }
+ 
+ // ä»æ ‡ç­¾ä¸­è·å–Podé˜¶æ®µä¿¡æ¯
+ func getPodPhase(labels []LabelData) string {
+ 	for _, label := range labels {
+ 		if label.Name == "phase" {
+ 			return label.Value
+ 		}
+ 	}
+ 	return "Unknown"
+ }
+ 
+ // ä»æ ‡ç­¾ä¸­è·å–å‘½åç©ºé—´
+ func getNamespace(labels []LabelData) string {
+ 	for _, label := range labels {
+ 		if label.Name == "namespace" {
+ 			return label.Value
+ 		}
+ 	}
+ 	return "default"
+ }
  
```

---

è¦è®©æµè§ˆå™¨æ­£ç¡®åŠ è½½æˆ‘ä»¬æ›´æ–°çš„CSSæ ·å¼ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æ ·å¼è¢«æ­£ç¡®åŒ…å«åœ¨æŠ¥å‘Šä¸­ï¼š

---

```diff
              flex-wrap: wrap;
          }
+ 
+         .pod-status-legend .legend-item {
+             display: flex;
+             align-items: center;
+             margin-right: 20px;
+             margin-bottom: 5px;
+         }
  
          .pod-status-legend .legend-color {
```

---

ç¡®ä¿JavaScriptéƒ¨åˆ†æ­£ç¡®å¤„ç†çŠ¶æ€åˆ†ç±»ï¼š

---

```diff
  	case "failed":
  		return "failed"
+ 	case "unknown", "":
+ 		return "unknown"
  	default:
  		return "unknown"
```

---

ç°åœ¨è®©æˆ‘ä»¬å†æ¬¡æ£€æŸ¥JavaScriptè„šæœ¬éƒ¨åˆ†ï¼Œç¡®ä¿æˆ‘ä»¬çš„å‡½æ•°å¯ä»¥æ­£ç¡®åœ°å¤„ç†Podåˆ†ç»„ï¼š

---

```diff
  
  <script>
-     // Podç›¸å…³çš„è¾…åŠ©å‡½æ•°
+     // Podç›¸å…³çš„è¾…åŠ©å‡½æ•° - ç›´æ¥ä½¿ç”¨Goæ¨¡æ¿å‡½æ•°ä»£æ›¿ï¼Œä¸éœ€è¦åœ¨JavaScriptä¸­å†å®šä¹‰è¿™äº›åŠŸèƒ½
+     // ä½†ä¿ç•™ç©ºçš„åŒ…è£…å™¨å‡½æ•°ï¼Œä»¥é˜²ä¸‡ä¸€æœ‰åœ°æ–¹ä½¿ç”¨äº†å®ƒä»¬
      function groupPodsByNamespace(podMetrics) {
-         const namespaceGroups = {};
-         
-         for (const metric of podMetrics) {
-             // æŸ¥æ‰¾namespaceæ ‡ç­¾
-             const namespaceLabel = metric.Labels.find(label => label.Name === "namespace");
-             const namespace = namespaceLabel ? namespaceLabel.Value : "default";
-             
-             if (!namespaceGroups[namespace]) {
-                 namespaceGroups[namespace] = [];
-             }
-             
-             namespaceGroups[namespace].push(metric);
-         }
-         
-         return namespaceGroups;
+         console.log("æ­¤å‡½æ•°å·²è¢«Goæ¨¡æ¿å‡½æ•°æ›¿ä»£");
+         return {};
      }
      
      function getPodName(labels) {
-         const podLabel = labels.find(label => label.Name === "pod");
-         return podLabel ? podLabel.Value : "æœªçŸ¥";
+         console.log("æ­¤å‡½æ•°å·²è¢«Goæ¨¡æ¿å‡½æ•°æ›¿ä»£");
+         return "";
      }
      
      function getPodStatusClass(status) {
-         if (status === "Running" || status === "running") return "running";
-         if (status === "Succeeded" || status === "succeeded") return "succeeded";
-         if (status === "Pending" || status === "pending") return "pending";
-         if (status === "Failed" || status === "failed") return "failed";
-         return "unknown";
+         console.log("æ­¤å‡½æ•°å·²è¢«Goæ¨¡æ¿å‡½æ•°æ›¿ä»£");
+         return "";
      }
  </script>
```

---

ç°åœ¨æˆ‘ä»¬å®Œæˆäº†æ‰€æœ‰å¿…è¦çš„ä¿®æ”¹ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬è¿›è¡Œçš„ä¿®æ”¹çš„æ€»ç»“ï¼š

1. ä¿®æ”¹äº†report.htmlæ–‡ä»¶ï¼Œå°†Podè¿è¡ŒçŠ¶æ€çš„å±•ç¤ºä»è¡¨æ ¼å½¢å¼æ”¹ä¸ºæ ¼å­å½¢å¼
2. æŒ‰namespaceåˆ†ç»„å±•ç¤ºPodçŠ¶æ€
3. æ ¹æ®Podçš„çŠ¶æ€è®¾ç½®ä¸åŒçš„é¢œè‰²ï¼šRunningå’ŒSucceededä¸ºç»¿è‰²ï¼ŒPendingä¸ºé»„è‰²ï¼ŒFailedä¸ºçº¢è‰²ï¼ŒUnknownä¸ºç°è‰²
4. å®ç°äº†é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºpodåç§°ã€å‘½åç©ºé—´å’Œè¿è¡ŒçŠ¶æ€çš„åŠŸèƒ½
5. ä¿®æ”¹äº†é…ç½®æ–‡ä»¶ä¸­çš„PodçŠ¶æ€æŸ¥è¯¢ï¼Œä»¥è·å–æ‰€æœ‰çŠ¶æ€çš„Podä¿¡æ¯
6. åœ¨Goä»£ç ä¸­æ·»åŠ äº†æ”¯æŒæ¨¡æ¿å‡½æ•°ï¼Œç”¨äºå¤„ç†PodçŠ¶æ€æ•°æ®
7. ä»è¡¨æ ¼ä¸­åˆ é™¤äº†å·²ç»åœ¨æ ¼å­ä¸­æ˜¾ç¤ºè¿‡çš„å†…å®¹ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰

è¿™äº›ä¿®æ”¹ä½¿å¾—Podè¿è¡ŒçŠ¶æ€çš„å±•ç¤ºæ›´åŠ ç›´è§‚å’Œç¾è§‚ï¼Œç”¨æˆ·å¯ä»¥ä¸€ç›®äº†ç„¶åœ°çœ‹åˆ°å„ä¸ªå‘½åç©ºé—´ä¸­Podçš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡é¼ æ ‡æ‚¬åœè·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚

---

_**User**_

å®é™…æ˜¾ç¤ºæŒºå¥½çš„ï¼Œä½†æ˜¯æœ‰äº›é‡å¤äº†ï¼Œkube_pod_status_phaseåªè¦å€¼ä¸º1çš„ï¼Œåªæœ‰1çš„æ‰ä¸ºå®é™…çŠ¶æ€

---

